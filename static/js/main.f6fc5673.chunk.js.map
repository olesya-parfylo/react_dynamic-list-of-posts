{"version":3,"sources":["components/Loader/Loader.tsx","components/PostsList/PostsList.tsx","api/api.ts","api/post.ts","api/comments.ts","components/NewCommentForm/NewCommentForm.tsx","components/PostDetails/PostDetails.tsx","App.tsx","index.tsx"],"names":["Loader","className","PostsList","posts","setSelectedPostId","selectedPostId","loading","map","post","userId","title","id","type","onClick","disabled","BASE_URL","postsUrl","request","url","fetch","then","response","json","catch","error","console","createComment","comment","postId","method","headers","body","JSON","stringify","NewCommentForm","createNewComment","useState","name","email","setComment","onSubmit","event","preventDefault","value","placeholder","onChange","target","currentComment","PostDetails","comments","setComments","setPost","showComments","setShowComments","loadingPost","setLoadingPost","useEffect","getPostDetails","receivedPost","getComments","useCallback","getPostComments","receivedComments","newComment","a","toUpperCase","length","App","setPosts","selectedUserId","setSelectedUserId","setLoading","receivedPosts","htmlFor","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f6fc5673.chunk.js","sourcesContent":["import React from 'react';\nimport './Loader.scss';\n\nexport const Loader: React.FC = () => (\n  <div className=\"Loader\">\n    <div className=\"Loader__content\" />\n  </div>\n);\n","import React from 'react';\nimport { Loader } from '../Loader';\nimport './PostsList.scss';\n\nexport type Post = {\n  id: number,\n  userId: number,\n  title: string,\n  body: string,\n  createdAt: string,\n  updatedAt: string,\n};\n\ntype Props = {\n  posts: Post[],\n  loading: boolean,\n  setSelectedPostId: (selectedPostId: number) => void,\n  selectedPostId: number,\n};\n\nexport const PostsList: React.FC<Props> = ({\n  posts,\n  setSelectedPostId, selectedPostId,\n  loading,\n}) => {\n  return (\n    <div className=\"PostsList\">\n      <h2>Posts:</h2>\n      {loading ? (\n        <Loader />\n      ) : (\n        <ul className=\"PostsList__list\">\n          {posts.map((post: Post) => (\n            <li key={post.id} className=\"PostsList__item\">\n              <div>\n                <b>\n                  {`[User #${post.userId}]:`}\n                </b>\n                {post.title}\n              </div>\n              {selectedPostId !== post.id && (\n                <button\n                  type=\"button\"\n                  className=\"PostsList__button button\"\n                  onClick={() => {\n                    setSelectedPostId(post.id);\n                  }}\n                >\n                  Open\n                </button>\n              )}\n              {selectedPostId === post.id && (\n                <button\n                  type=\"button\"\n                  className=\"PostsList__button button\"\n                  disabled\n                >\n                  Close\n                </button>\n              )}\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n","export const BASE_URL = 'https://mate.academy/students-api';\n","import { BASE_URL } from './api';\n\nexport const postsUrl = `${BASE_URL}/posts`;\n\nexport function request(url: string) {\n  return fetch(url)\n    .then(response => response.json())\n    .catch(error => {\n      // eslint-disable-next-line no-console\n      console.error(error);\n    });\n}\n\nexport function getUserPosts(userId: number) {\n  if (userId === 0) {\n    return request(`${postsUrl}`);\n  }\n\n  return request(`${postsUrl}?userId=${userId}`);\n}\n\nexport function getPostDetails(postId: number) {\n  return request(`${postsUrl}/${postId}`);\n}\n","import { BASE_URL } from './api';\nimport { request } from './post';\n\ntype Comment = {\n  postId: number,\n  name: string,\n  email: string,\n  body: string,\n};\n\nexport function getPostComments(postId: number) {\n  return request(`${BASE_URL}/comments?postId=${postId}`);\n}\n\nexport const createComment = (comment: Comment, postId: number) => {\n  return fetch(`${BASE_URL}/comments?postId=${postId}`, {\n    method: 'POST',\n    headers: {\n      'Content-type': 'application/json; charset=UTF-8',\n    },\n    body: JSON.stringify(comment),\n  });\n};\n\nexport const deleteComment = (id: number) => {\n  return fetch(\n    `${BASE_URL}/comments/${id}`,\n    { method: 'DELETE' },\n  );\n};\n","import React, { useState } from 'react';\nimport './NewCommentForm.scss';\n\nexport type NewComment = {\n  name: string,\n  email: string,\n  body: string,\n};\n\ntype Props = {\n  createNewComment: (newComment: NewComment) => void,\n};\n\nexport const NewCommentForm: React.FC<Props> = ({ createNewComment }) => {\n  const [comment, setComment] = useState<NewComment>({\n    name: '',\n    email: '',\n    body: '',\n  });\n\n  return (\n    <form\n      className=\"NewCommentForm\"\n      onSubmit={(event) => {\n        event.preventDefault();\n        createNewComment(comment);\n        setComment({ name: '', email: '', body: '' });\n      }}\n    >\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"name\"\n          value={comment.name}\n          placeholder=\"Your name\"\n          className=\"NewCommentForm__input\"\n          onChange={({ target }) => {\n            setComment((currentComment: NewComment) => ({\n              ...currentComment,\n              name: target.value,\n            }));\n          }}\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <input\n          type=\"email\"\n          name=\"email\"\n          value={comment.email}\n          placeholder=\"Your email\"\n          className=\"NewCommentForm__input\"\n          onChange={({ target }) => {\n            setComment((currentComment: NewComment) => ({\n              ...currentComment,\n              email: target.value,\n            }));\n          }}\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <textarea\n          name=\"body\"\n          value={comment.body}\n          placeholder=\"Type comment here\"\n          className=\"NewCommentForm__input\"\n          onChange={({ target }) => {\n            setComment((currentComment: NewComment) => ({\n              ...currentComment,\n              body: target.value,\n            }));\n          }}\n        />\n      </div>\n\n      <button\n        type=\"submit\"\n        className=\"NewCommentForm__submit-button button\"\n      >\n        Add a comment\n      </button>\n    </form>\n  );\n};\n","import React, {\n  useState,\n  useEffect,\n  useCallback,\n} from 'react';\nimport {\n  getPostComments,\n  createComment,\n  deleteComment,\n} from '../../api/comments';\nimport { getPostDetails } from '../../api/post';\nimport { NewCommentForm, NewComment } from '../NewCommentForm';\nimport { Post } from '../PostsList';\nimport { Loader } from '../Loader';\nimport './PostDetails.scss';\n\ntype Comment = {\n  id: number,\n  postId: number,\n  name: string,\n  email: string,\n  body: string,\n  createdAt: string,\n  updatedAt: string,\n};\n\ntype Props = {\n  postId: number,\n};\n\nexport const PostDetails: React.FC<Props> = ({ postId }) => {\n  const [comments, setComments] = useState<Comment[]>([]);\n  const [post, setPost] = useState<Post>();\n\n  const [showComments, setShowComments] = useState(true);\n  const [loadingPost, setLoadingPost] = useState(false);\n\n  useEffect(() => {\n    getPostDetails(postId)\n      .then(receivedPost => {\n        setPost(receivedPost);\n        setLoadingPost(true);\n      });\n  }, [postId]);\n\n  const getComments = useCallback((id: number) => {\n    getPostComments(id)\n      .then(receivedComments => {\n        setComments(receivedComments);\n      });\n  }, []);\n\n  useEffect(() => {\n    getComments(postId);\n  }, [postId]);\n\n  const createNewComment = async (newComment: NewComment) => {\n    await createComment({\n      ...newComment,\n      postId,\n    }, postId);\n\n    getComments(postId);\n  };\n\n  return (\n    <>\n      {loadingPost && post ? (\n        <div className=\"PostDetails\">\n          <h2>\n            {`${post.title.toUpperCase()}:`}\n          </h2>\n\n          <section className=\"PostDetails__post\">\n            <p>\n              {post.body}\n            </p>\n          </section>\n\n          <section className=\"PostDetails__comments\">\n            {comments.length > 0 && (\n              <button\n                type=\"button\"\n                className=\"PostDetails__button button\"\n                onClick={() => {\n                  setShowComments(!showComments);\n                }}\n              >\n                {showComments ? 'Hide' : 'Show'}\n                {` ${comments.length} comments`}\n              </button>\n            )}\n\n            {comments ? (\n              showComments && (\n                <ul className=\"PostDetails__list\">\n                  {comments.map(currentComment => (\n                    <li\n                      className=\"PostDetails__list-item\"\n                      key={currentComment.id}\n                    >\n                      <button\n                        type=\"button\"\n                        className=\"PostDetails__remove-button button\"\n                        onClick={async () => {\n                          await deleteComment(currentComment.id);\n\n                          getComments(postId);\n                        }}\n                      >\n                        X\n                      </button>\n                      <p>\n                        {currentComment.body}\n                      </p>\n                    </li>\n                  ))}\n                </ul>\n              )\n            ) : (\n              <Loader />\n            )}\n          </section>\n          <section>\n            <div className=\"PostDetails__form-wrapper\">\n              <NewCommentForm\n                createNewComment={createNewComment}\n              />\n            </div>\n          </section>\n        </div>\n      ) : (\n        <Loader />\n      )}\n    </>\n  );\n};\n","import React, { useEffect, useState } from 'react';\nimport './App.scss';\nimport './styles/general.scss';\nimport { Post, PostsList } from './components/PostsList';\nimport { PostDetails } from './components/PostDetails';\nimport { getUserPosts } from './api/post';\n\nconst App: React.FC = () => {\n  const [posts, setPosts] = useState<Post[]>([]);\n\n  const [selectedUserId, setSelectedUserId] = useState(0);\n  const [selectedPostId, setSelectedPostId] = useState(0);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    getUserPosts(selectedUserId)\n      .then(receivedPosts => {\n        setPosts(receivedPosts);\n\n        setLoading(false);\n      });\n  }, [selectedUserId]);\n\n  return (\n    <div className=\"App\">\n      <header className=\"App__header\">\n        <label htmlFor=\"posts\">\n          Select a user: &nbsp;\n\n          <select\n            className=\"App__user-selector\"\n            id=\"posts\"\n            onChange={({ target }) => {\n              setSelectedUserId(+target.value);\n            }}\n          >\n            <option value=\"0\">All users</option>\n            <option value=\"1\">Leanne Graham</option>\n            <option value=\"2\">Ervin Howell</option>\n            <option value=\"3\">Clementine Bauch</option>\n            <option value=\"4\">Patricia Lebsack</option>\n            <option value=\"5\">Chelsey Dietrich</option>\n            <option value=\"6\">Mrs. Dennis Schulist</option>\n            <option value=\"7\">Kurtis Weissnat</option>\n            <option value=\"8\">Nicholas Runolfsdottir V</option>\n            <option value=\"9\">Glenna Reichert</option>\n            <option value=\"10\">Leanne Graham</option>\n          </select>\n        </label>\n      </header>\n\n      <main className=\"App__main\">\n        <div className=\"App__sidebar\">\n          <PostsList\n            posts={posts}\n            setSelectedPostId={setSelectedPostId}\n            selectedPostId={selectedPostId}\n            loading={loading}\n          />\n        </div>\n\n        <div className=\"App__content\">\n          {selectedPostId !== 0 ? (\n            <PostDetails\n              postId={selectedPostId}\n            />\n          ) : (\n            'Select post'\n          )}\n        </div>\n      </main>\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}